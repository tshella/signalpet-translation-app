FROM libretranslate/libretranslate:latest

# Ensure model directory is writable
RUN mkdir -p /app/models

# Copy pre-downloaded models into writable /app/models
COPY ./argos-models-packages/*.argosmodel /app/models/

# Copy entrypoint with executable permission
COPY --chmod=755 ./entrypoint.sh /app/entrypoint.sh

# Entrypoint script will handle hybrid fallback logic
ENTRYPOINT ["/app/entrypoint.sh"]
